## [day56] 2023.06.13 화 학습 내용 정리
1. 도커
---
## 1. 도커
- 도커를 사용하면 좋은 점  
도커를 사용할 경우, CentOS + Apache + Node.js + Source 형식의 이미지를 하나만 준비하고 원격으로 한 번에 모두 배포 및 구동한다. Apache가 Nginx로 교체된다면 CentOS + Nginx + Node.js + Source의 형태로 이미지만 다시 제작하여 100대를 한 번에 배포한 후 컨테이너만 다시 가동시키면 된다. OS의 경우도 마찬가지이다. 

### Docker 명령어
- docker info  
현재 환경에서 사용하는 docker에 대한 정보 확인.
- docker exec -it [container id] /bin/bash  
실행중인 컨테이너 내부로 접속.
    - docker run과 비슷하다. docker run의 경우 새로운 컨테이너 환경을 만드는 반면 docker exec는 이미 실행된 특정 컨테이너의 환경을 디버깅 하는 용도로 사용한다.
    - -it : 옵션
    - -i : 표준 입출력을 사용하겠다는 의미
    - -t : 가상 tty를 통해 접속하겠다는 의미
    - 컨테이너 접속 후 빠져나올 때는 exit를 통해 간단하게 빠져나올 수 있다.
- docker ps   
현재 사용중인 이미지와 컨테이너 목록을 알 수 있음.
    - -a 옵션을 추가하면 현재 사용중이지 않은 컨테이너까지 조회 가능 
- docker stats  
컨테이너의 리소스 사용량 통계를 실시간 반복 출력으로 보여준다.
    - --no-stream 옵션을 추가하면 반복 출력하지 않고 현 시점의 결과만 1회 출력한다.
- docker prune  
사용하지 않는 컨테이너 이미지를 제거하는 명령어. prune의 가장 큰 특징은 어떠한 옵션을 주는가에 따라 그 역할이 달라진다는 것이다.
    - option
        - docker volume prune : 미사용 볼륨 제거
        - docker container prune : 미사용 컨테이너 제거
        - docker image prune : 미사용 이미지 제거
        - docker system prune : 미사용중인 이미지, 컨테이너, 볼륨 모두 제거
- docker system df  
현재 사용중인 이미지, 컨테이너 및 볼륨이 얼마나 많은 공간을 사용하고 있는지 확인할 수 있는 명령어. 뒤에 -v (vervose) 옵션을 추가하면 사용하지 않는 이미지와 컨테이너도 확인 가능.

### 도커 허브  
- 도커 레지스트리(이미지를 배포하는 사이트)
- 공개된 컨테이너 이미지가 모여있는 사이트

### 구조
- 독립된 환경(격리 가능)
- 이미지 생성 가능
- 컨테이너에 커널 포함되지 않아 가벼움

### 장점  
- 1대의 물리적인 서버에 여러 대의 서버를 구동할 수 있다.
- 서버 관리가 용이하다.
    - 다른 소프트웨어에 영향을 미치지 않는다.
    - 컨테이너 교체나 수정이 쉬워 환경 이전도 수월하다.
- 서버 고수가 아니어도 다루기 수월하다.
    - 명령 한 줄로 서버 구축 완료.

### 단점  
- 리눅스 소프트웨어만 지원한다.
- 호스트 서버에 문제 발생 시 모든 컨테이너에 영향을 미친다.
- 컨테이너를 하나만 사용하는 경우에는 비효율적이다.

### 주용도
1. 팀원들에게 동일한 개발환경 제공
    - 같은 프로젝트 팀원에게 개발환경을 동일하게 제공한다.
    - 프로젝트별 컨테이너를 따로 사용할 수 있다.
    - 개발환경과 운영환경의 차이가 없다.
2. 새로운 버전의 테스트
    - 새로운 운영체제나 라이브러리 버전을 개발환경에서 먼저 테스트하고 운영환경에 컨테이너로 적용.
3. 동일한 서버가 여러 대 필요한 경우
    - 1대의 물리 서버에 여러 개의 컨테이너를 이용할 수 있으므로 비용 절약 가능.
    - 명령 한 줄로 원하는만큼 서버 구동이 가능하다.
    - 스케일링에 유리하므로 웹 서버나 API 서버로 많이 활용한다.

### 도커 환경 구축 방법 (명령어는 공통적으로 사용)
1. 리눅스 컴퓨터에서 도커 사용하기
2. 가상 머신이나 렌탈 환경에 도커를 설치하고 윈도우나 macOS를 통해 사용하기
3. 윈도우용/macOS용 도커 사용하기