## [day54] 2023.06.13 화 학습 내용 정리
1. 도커
---
## 1. 도커
### 도커 명령의 구성
- docker
    - container
        - start
            - -a
            - -i
        - stop
            - -t
        - create
            - -a
            - -e
            - -i
            - -p
            - -v
            - .....
        - run
            - -d
            - -e
            - -i
            - -t
            - -p
            - -v
            - .....
        - exec
        - .....
    - image
        - pull
        - search
        - .....
    - volume
        - create
        - rm
        - .....
    - network
        - create
        - rm
        - ....

- 도커 버전 확인  
docker --version

- 컨테이너 제어 명령  
docker [container] 하위명령 옵션
    - 주요 하위 커맨드
        - start : 컨테이너를 실행
        - stop : 컨테이너를 정지
        - create : 도커 이미지로부터 컨테이너를 생성
        - run : 도커 이미지를 내려받고 컨테이너를 생성해 실행함(다운로드는 필요한 경우에만)
        - rm : 정지 상태의 컨테이너를 삭제
        - exec : 실행 중인 컨테이너 속에서 프로그램을 실행
        - ls : 컨테이너 목록 출력
        - ps : 현재 실행중인 컨테이너 목록 출력
        - cp : 도커 컨테이너와 도커 호스트 간에 파일을 복사
        - commmit : 도커 컨테이너를 이미지로 변환

- 이미지 제어 명령  
docker image 하위명령 옵션  
    -   주요 하위 커맨드
        - pull : 도커 허브 등의 리포지토리에서 이미지를 내려받음
        - rm : 도커 이미지를 삭제
        - ls : 내려 받은 이미지의 목록을 출력
        - build : 도커 이미지를 생성

- 볼륨 제어 명령  
docker volume 하위명령 옵션  
    - 주요 하위 커맨드
        - create : 볼륨을 생성
        - inspect : 볼륨의 상세 정보를 출력
        - ls : 볼륨의 목록을 출력
        - prune : 현재 마운트되지 않은 볼륨을 모두 삭제
        - rm : 지정한 볼륨을 삭제 

- 네트워크 제어 명령  
docker network 하위명령어 옵션  
    - 주요 하위 커맨드
        - connect : 컨테이너를 도커 네트워크에 연결
        - disconnect : 컨테이너의 도커 네트워크 연결을 해제
        - create : 도커 네트워크의 생성
        - inspect : 도커 네트워크의 상세 정보를 출력
        - ls : 도커 네트워크의 목록을 출력
        - prune : 현재 컨테이너가 접속하지 않은 네트워크를 모두 삭제
        - rm : 지정한 네트워크를 삭제


### 컨테이너의 통신

### 도커 컨테이너의 저장소  
- 볼륨(volumn)
    - 도커 엔진이 관리하는 영역 내 만들어진 볼륨을 컨테이너에 디스크 형태로 마운트하여 사용
    - 직접 조작이 어려우므로 주로 '임시 목적' 또는 '자주 쓰지는 않지만 지우면 안되는 파일을 저장'하는 목적으로 사용
    - 도커 엔진에 의해 관리
        - 리눅스의 경우 /var/lib/docker/volumns
        - 도커 데스크톱의 경우 도커 엔진의 관리영역
    - 운영체제와 무관하게 일관성있는 방식으로 작업
    - 도커 제작사에서 추천하는 방식
    - 도커 컨테이너를 이용하지 않고는 접근 불가능
    - 백업 절차 복잡 
- 바인드 마운트(bind mount)
    - 도커 엔진에서 관리하지 않는 영역의 디렉터리를 컨테이너에 마운트하는 방식
    - 해당 디렉터리를 직접 조회할 수 있으므로 자주 사용하는 파일을 보관하는 용도로 사용
    - 기존에 사용하는 방식으로 파일 사용 가능
        - 도커 엔진과 무관하게 파일 제어
        - 파일 자주 편집해야 하는 경우 좋음

- 볼륨 생성 방법
    - docker volume create 볼륨이름
    - docker volume rm 볼륨이름
    - 주요 하위 커맨드
        - create : 볼륨을 생성
        - inspect : 볼륨의 상세 정보를 출력
        - ls : 볼륨의 목록을 출력
        - prune : 현재 마운트되지 않은 볼륨을 모두 삭제
        - rm : 지정한 볼륨을 삭제

### 컨테이너로 이미지 만드는 방법
- 나만의 이미지로 동일한 구성의 컨테이너를 대량 생성 가능
- 다른 서버로 쉽게 이동 가능
- 이미지 만드는 방법
    - commit 명령으로 만들기
    - Dockerfile 스크립트로 만들기
    
#### 이미지 만들기
1. commit 명령으로 컨테이너를 이미지로 변환하기  
`docker commit 컨테이너이름 새로운이미지이름`

2. Dockerfile 스크립트로 이미지 생성하기  
Dockerfile에 컨테이너에 넣을 이미지나 실행할 명령 등 기술  
`docker build -t 생성할이미지이름 Dockerfile경로`



