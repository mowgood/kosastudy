## [day55] 2023.06.09 금 학습 내용 정리
1. 도커
---
## 1. 도커
### YAML  
**CSV, XML, JSON, Properties**   
서로 다른 시스템 간에 데이터를 주고 받을 때 데이터 연동과 호환성을 위해 포맷에 대한 규칙을 정의하는 용도로 사용되는 파일들.  

### 도커  
- 데이터 또는 프로그램을 각각 독립된 환경에서 격리시키는 기능을 제공하는 소프트웨어
- 운영체제(유사) 통째로 격리
- 주로 서버에서 사용
- 컨테이너 기반 기술(Isolation)
- 리눅스 커널에서 제공하는 기능
- 하나의 시스템에서 프로세스를 격리시킬 수 있는 가상화 기술

### 가상 머신 VS 도커 컨테이너
- 가상 머신  
    - 한 종류의 운영체제만 사용하여 해당 운영체제에 알맞는 애플리케이션만 구동 가능
    - 매번 운영체제를 따로 설치해주는 것은 host 컴퓨터 입장에서 많은 부담이 간다.
- 도커 컨테이너  
    - 도커엔진을 이용하여 컨테이너를 띄운다.
    - 컨테이너는 Application을 사용할 수 있는 가상 환경이고 별도 운영체제가 필요하지 않다.
    - host 환경에 부담이 덜 간다.
    - 컨테이너를 기록할 수 있고, 그 형태를 이미지라고 한다.
        - 도커엔진이 설치된 환경에서 이미지만 있다면 불필요하게 우분투와 같은 운영체제를 설치하지 않고 Application을 실행할 수 있다.

### 도커 파일(Dockerfile)  
특정 이미지로 컨테이너를 생성하고 일련의 작업을 수행하는 과정을 기록한 파일
|지시어|설명|
|--|--|
|FROM|베이스 이미지 지정|
|RUN|이미지를 지정하면서 실행할 명령 지정|
|ENTRYPOINT|컨테이너의 어플 지정(컨테이너 시작할 때 실행할 명령어)|
|EXPOSE|컨테이너의 포트 지정|
|ADD|이미지 생성 시 파일 추가|
|COPY|이미지 생성 시 파일 복사|
|WORKDIR|컨테이너 작업 디렉토리 지정|
|MAINTAINER|이미지 작성자 명시|
|CMD|컨테이너의 어플 지정(컨테이너 시작할 때 실행할 명령어)|
|LABEL|이미지의 라벨 지정|
|ENV|컨테이너의 환경 변수 지정|
|VOLUME|컨테이너의 볼륨 지정|
|USER|컨테이너의 사용자 지정|

### 컨테이너와 도커 엔진  
컨테이너를 다루는 기능을 제공하는 소프트웨어 : 도커  


### 마운트 종류
- **볼륨 마운트**  
    - 도커 엔진이 관리하는 영역 내에 만들어진 볼륨을 컨테이너에 디스크 형태로 마운트하여 사용
    - 도커 엔진에 의해 관리
    - 운영체제와 무관하게 일관성있는 방식으로 작업
    - 도커 제작사에서 추천하는 방식
    - 도커 컨테이너를 이용하지 않고는 접근 불가능
    - 백업 절차 복잡
- **바인드 마운트**
    - 도커 엔진에서 관리하지 않는 영역에 디렉터리를 컨테이너에서 마운트하는 방식
    - 해당 디렉터리를 직접 조회할 수 있으므로 자주 사용하는 파일을 보관하는 용도로 사용
    - 기존에 사용하는 방식으로 파일 사용 가능
        - 도커 엔진과 무관하게 파일 제어
        - 파일을 자주 편집해야 하는 경우 좋음

### 볼륨 생성 방법
```cmd
docker volume create 볼륨이름
docker volume rm 볼륨이름
```

### 주요 하위 커맨드
|커맨드|내용|생략형|주요 옵션|
|--|--|--|--|
|create|볼륨을 생성|X|거의 사용하지 않음|
|inspect|볼륨의 상세 정보를 출력|X|거의 사용하지 않음|
|ls|볼륨의 목록을 출력|X|거의 사용하지 않음|
|prune|현재 마운트되지 않은 볼륨을 모두 삭제|X|거의 사용하지 않음|
|rm|지정한 볼륨을 삭제|X|거의 사용하지 않음|