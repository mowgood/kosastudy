### 2023.02.27 월
### Linux CentOS 8

### 리눅스의 구조
1. 커널
2. 셸
3. 응용 프로그램

### 가상 머신 
- 컴퓨터에 설치되어 있는 운영체제에 가상의 머신을 생성한 후 다른 운영체제를 설치할 수 있도록 해주는 응용 프로그램
- `VMWare, 버추얼 PC, 버추얼 박스`

### 리눅스 기본 명령어
- pwd : 현재 폴더 출력
- ls : 폴더 파일목록 출력 `ls -l, ls -ld`
- cd : 파일 또는 폴더 복사
- cp : 파일 또는 폴더 복사
- touch : 파일 생성 또는 수정시간 변경
- mv : 파일이나 폴더의 위치 변경, 이름 변경
- mkdir : 폴더 생성
- rmdir : 폴더 삭제
- cat : 파일 내용 출력
- head, tail : 파일의 첫 10행, 마지막 10행 출력
- file : 파일의 종류를 표시
- clear : 화면 지움
- man : 명령어 help

### File Permission  
접근 권한의 종류
- 읽기 r (4)
- 쓰기 w (2)
- 실행 x (1)
- 권한 없음 - (0)

### Link
1. 하드 링크  
ln 링크대상파일이름 링크파일이름  
하드 링크 생성 시 하드링크파일만 생성됨(inode1 그대로 공유)  

2. 심볼릭 링크  
ln -s 링크대상파일이름 링크파일이름  
심볼릭 링크를 생성하면 새로운 inode2를 만들고, 데이터는 원본 파일을 연결하는 효과를 가짐  

### 파일 압축 유틸리티
- 파일 묶기 (tar)
    -동작 : c(묶기), x(풀기), t(경로확인)
    -옵션 : f(파일), v(과정보이기), J(tar+xz), z(tar+gzip), j(tar+bzip2)
    - `tar cvf my.tar /etc/sysconfig (묶기)`
    - `tar xvf my.tar (풀기)`

### 파일 위치 검색
`find [경로] [옵션] [조건] [action]`
- [옵션] -name, -user(소유자), -newer(전,후), -perm(허가권), -size(크기)
- [액션] -print(디폴트), -exec(외부명령 실행)
- `find /bin -size + 10k -size -100k`

### vi Editor
- 입력모드
    - i : 커서 자리에 입력모드 (input)
    - a : 커서 뒤로 입력모드 (append)
    - o : 커서 다음으로 오픈 라인 생성 (open line)
    - I : 커서위치 라인 첫컬럼에서 입력모드 (Input)
    - A : 커서위치 마지막 커럶에서 입력모드 (Append)
    - O : 커서위치 앞으로 라인 생성 (Open line)

### 이동 명령어
- ^ : 현재 행의 첫컬럼으로 이동
- $ : 현재 행의 마지막 컬럼으로 이동
- w : 다음 단어로 이동 (word)
- 10G : 10라인으로 이동
- :10 : 10라인으로 이동

### 명령어
- cw : 단어 수정 (Change Word)
- cc : 현재 전체 라인 수정
- r : 현재 글자 다른 글자로 수정 (Replace)
- x : 한 글자 지움 (delete)
- dw : 한 단어 삭제 (delete word)
- dd : 한 라인 삭제
- #dd : 숫자만큼의 라인 삭제 `3dd : 세줄 삭제`
- yy : 현재 라인을 버퍼로 복사  (yank)
- #yy : 숫자만큼의 라인을 버퍼로 복사 `3yy : 세줄 복사`
- p : 버퍼의 내용을 복사 (paste)

### 검색 명령어
- /string : 문자열 검색 (Search)
- n : 다음 위치 검색 (next)
- N : 이전으로 위치 검색 (Next)

### 파일 저장관련 명령어들
- :r filename : 파일 오픈 (Read)
- :w : 파일 저장 (Write)
- :w filename : 파일이름 지정하여 저장
- :wq! : 파일 저장하고 나감 (write and quit)

### system 서비스  
systemed는 기존의 init 스크립트를 대체한다.

### 단일 사용자 모드로 전환하기  
- 런레벨 1
    - 시스템에 문제가 있을 경우 시스템을 런레벨 1로 변경하여 점검
    - 안전모드로 생각
    - 변환하기 전에 다른 사용자들은 로그아웃 해야 한다
- 현재 런레벨 확인 : systemctl -t target

### 프로세스 & 데몬  
하드디스크에 저장된 실행코드(프로그램)가 메모리에 로딩되어 활성화된 것

### 포그라운드 프로세스
- 실행하면 화면에 나타나서 사용자와 상호작용하는 프로세스
- 대부분의 응용프로그램

### 백그라운드 프로세스
- 실행은 되었지만, 화면에는 나타나지 않고 실행되는 프로세스
- 백신 프로그램, 서버 데몬 등

### 프로세스 번호  
각각의 프로세스에 할당된 고유 번호

### 작업 번호  
현재 실행되고 있는 백그라운드 프로세스의 순차번호

### 부모 프로세스와 자식 프로세스
- 모든 프로세스는 부모 프로세스를 가짐
- 부모 프로세스를 종료하면, 자식 프로세스도 자동 종료됨

### 프로세스 관련 명령
- ps  
현재 프로세스의 상태를 확인 `ps -ef | grep <프로세스 이름>`
- kill  
프로세스를 강제로 종료 `kill -9 <프로세스 번호>`
- pstree   
부모 프로세스와 자식 프로세스의 관계를 트리 형태로 출력

### 시스템 디렉토리
- / : 루트디렉토리
- /bin : 필수적이고 기본적인 명령어가 들어있는 디렉토리
- /boot : 시스템 부팅에 필요한 파일이 존재
- /etc : 시스템관련 설정파일 저장
- /home : 사용자 홈디렉토리
- /root : root계정의 홈디렉토리
- /var : 가변적인 데이터 존재

### 쉘 환경 설정
- 환경 설정 파일
    - 사용자가 로그인할 때마다 자동으로 실행되는 명령을 저장
    - 시스템 환경 설정 파일과 사용자 환경 설정 파일이 있음

### 시스템 환경 설정 파일
- 시스템을 사용하는 전체 사용자의 공통 환경을 설정
    - /etc/profile (시스템 공통으로 적용되는 환경 변수를 설정)
    - /etc/bashrc (시스템 공통으로 적용되는 함수와 에일리어스를 설정)
    - /etc/profile.d/*.sh (언어나 명령별로 각각 필요한 환경을 설정)


### 사용자 환경 설정 파일
- 각 사용자의 홈 디렉터리에 숨김 파일로 생성됨, 사용자가 내용을 수정하고 관리 가능
    - ~/.bash_profile (경로 추가 등 사용자가 정의하는 환경을 설정)
    - ~/.bashrc (사용자가 정의하는 에일리어스나 함수 등을 설정)
    - ~/.bash_logout (로그아웃 시 실행할 필요가 있는 함수 등을 설정)
